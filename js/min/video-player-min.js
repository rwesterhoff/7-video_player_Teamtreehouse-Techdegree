var supportsVideo=!!document.createElement("video").canPlayType,videoContainer=document.querySelector("#video-container");if(supportsVideo){var divHTML=document.createElement("div"),playButtonHTML='<button id="playpause" type="button" data-state="play">Play/Pause</button>\n',stopButtonHTML='<button id="stop" type="button" data-state="stop">Stop</button>\n',currentTimeIndicatorHTML='<span id="current-time-indicator"></span>\n',durationIndicatorHTML='<span id="duration-indicator"></span>\n',timeHTML='<div id="time-indicator">'+currentTimeIndicatorHTML+" / "+durationIndicatorHTML+"</div>",progressBarHTML='<div class="progress">\n<progress id="progress" value="0" min="0">\n<span id="progress-bar"></span>\n</progress>\n</div>\n',muteButtonHTML='<button id="mute" type="button" data-state="mute">Mute/Unmute</button>\n',volumeSliderHTML='<input type="range" id="volume-bar" min="0" max="1" step="0.1" value="1">\n',fullscreenButtonHTML='<button id="full-screen" type="button" data-state="go-fullscreen">Fullscreen</button>\n',captionsButtonHTML='<button id="captions" type="button" data-state="captions">CC</button>\n',controlsHTML="";controlsHTML+=progressBarHTML,controlsHTML+=playButtonHTML,controlsHTML+=stopButtonHTML,controlsHTML+=timeHTML,controlsHTML+=muteButtonHTML,controlsHTML+=volumeSliderHTML,controlsHTML+=fullscreenButtonHTML,controlsHTML+=captionsButtonHTML,divHTML.setAttribute("id","video-controls"),divHTML.setAttribute("class","controls"),divHTML.setAttribute("data-state","hidden"),divHTML.innerHTML=controlsHTML,videoContainer.appendChild(divHTML);var videoPlayer=document.querySelector("#video-player");videoPlayer.controls=!1;var videoControls=document.querySelector("#video-controls");videoControls.style.display="block";var playButton=document.querySelector("#playpause"),stopButton=document.querySelector("#stop"),muteButton=document.querySelector("#mute"),volumeSlider=document.querySelector("#volume-bar"),progress=document.querySelector("#progress"),progressBar=document.querySelector("#progress-bar"),fullscreenButton=document.querySelector("#full-screen"),captionsButton=document.querySelector("#captions"),currentTimeIndicator=document.querySelector("#current-time-indicator"),durationIndicator=document.querySelector("#duration-indicator");playButton.addEventListener("click",function(e){videoPlayer.paused||videoPlayer.ended?videoPlayer.play():videoPlayer.pause()}),stopButton.addEventListener("click",function(e){videoPlayer.pause(),videoPlayer.currentTime=0,progress.value=0}),muteButton.addEventListener("click",function(e){videoPlayer.muted=!videoPlayer.muted}),volumeSlider.addEventListener("change",function(){videoPlayer.volume=volumeSlider.value}),videoPlayer.addEventListener("loadedmetadata",function(){progress.setAttribute("max",videoPlayer.duration)});var timeIndicator=setInterval(function(){if(videoPlayer.readyState>0){var e=parseInt(videoPlayer.duration/60,10),t=Math.floor(videoPlayer.duration%60);10>t?durationIndicator.innerText=e+":0"+t:durationIndicator.innerText=e+":"+t;var n=parseInt(videoPlayer.currentTime/60,10),r=Math.floor(videoPlayer.currentTime%60);10>r?currentTimeIndicator.innerText=n+":0"+r:currentTimeIndicator.innerText=n+":"+r}},200);videoPlayer.addEventListener("timeupdate",function(){progress.value=videoPlayer.currentTime,progressBar.style.width=Math.floor(videoPlayer.currentTime/videoPlayer.duration*100)+"%"}),videoPlayer.addEventListener("timeupdate",function(){progress.getAttribute("max")||progress.setAttribute("max",videoPlayer.duration),progress.value=videoPlayer.currentTime,progressBar.style.width=Math.floor(videoPlayer.currentTime/videoPlayer.duration*100)+"%"}),progress.addEventListener("click",function(e){var t=(e.pageX-this.offsetLeft)/this.offsetWidth;videoPlayer.currentTime=t*videoPlayer.duration}),progress.addEventListener("click",function(e){var t=(e.pageX-this.offsetLeft)/this.offsetWidth;videoPlayer.currentTime=t*videoPlayer.duration});var fullScreenEnabled=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen);fullScreenEnabled||(fullscreenButton.style.display="none");var isFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},setFullscreenData=function(e){videoContainer.setAttribute("data-fullscreen",!!e)};fullscreenButton.addEventListener("click",function(e){isFullScreen()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),setFullscreenData(!1)):(videoContainer.requestFullscreen?videoContainer.requestFullscreen():videoContainer.mozRequestFullScreen?videoContainer.mozRequestFullScreen():videoContainer.webkitRequestFullScreen?videoContainer.webkitRequestFullScreen():videoContainer.msRequestFullscreen&&videoContainer.msRequestFullscreen(),setFullscreenData(!0))}),document.addEventListener("fullscreenchange",function(e){setFullscreenData(!(!document.fullScreen&&!document.fullscreenElement))}),document.addEventListener("webkitfullscreenchange",function(){setFullscreenData(!!document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",function(){setFullscreenData(!!document.mozFullScreen)}),document.addEventListener("msfullscreenchange",function(){setFullscreenData(!!document.msFullscreenElement)});for(var i=0;i<videoPlayer.textTracks.length;i++)videoPlayer.textTracks[i].mode="hidden";var captionMenuButtons=[],createMenuItem=function(e,t,n){var r=document.createElement("li"),o=r.appendChild(document.createElement("button"));return o.setAttribute("id",e),o.className="captions-button",t.length>0&&o.setAttribute("lang",t),o.value=n,o.setAttribute("data-state","inactive"),o.appendChild(document.createTextNode(n)),o.addEventListener("click",function(e){captionMenuButtons.map(function(e,t,n){captionMenuButtons[t].setAttribute("data-state","inactive")});for(var t=this.getAttribute("lang"),n=0;n<videoPlayer.textTracks.length;n++)videoPlayer.textTracks[n].language===t?(videoPlayer.textTracks[n].mode="showing",this.setAttribute("data-state","active")):videoPlayer.textTracks[n].mode="hidden";captionsMenu.style.display="none"}),captionMenuButtons.push(o),r},captionsMenu;if(videoPlayer.textTracks){var df=document.createDocumentFragment(),captionsMenu=df.appendChild(document.createElement("ul"));captionsMenu.className="captions-menu",captionsMenu.appendChild(createMenuItem("captions-off","","Off"));for(var i=0;i<videoPlayer.textTracks.length;i++)captionsMenu.appendChild(createMenuItem("captions-"+videoPlayer.textTracks[i].language,videoPlayer.textTracks[i].language,videoPlayer.textTracks[i].label));videoContainer.appendChild(captionsMenu)}captionsButton.addEventListener("click",function(e){"block"===captionsMenu.style.display?captionsMenu.style.display="none":captionsMenu.style.display="block"});for(var trackElements=document.querySelectorAll("track"),i=0;i<trackElements.length;i++)trackElements[i].hasAttribute("align")&&console.log(trackElements[i])}