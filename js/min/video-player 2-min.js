function VideoPlayer(e,t,n){var a=this;a.id=e,a.controlsContainer=t,a.playerControls=n,a.currentTime=0,a.displayAll=function(){a.displayProgress(),a.displayControls(),a.displayTime(),a.makeItWork(),a.setCaptions()},a.displayProgress=function(){var e=new Container("progress-container","progress","visible"),t=document.getElementById(a.controlsContainer),n="progress-bar",r="buffer-bar";e.createContainer(t);var i=e.id,o={progressBar:new Progress(n),bufferBar:new Progress(r)},d=o;a.renderInElement(i,d)},a.displayControls=function(){var e=new Container("button-container","buttons","visible"),t=document.getElementById(a.controlsContainer);e.createContainer(t);var n=e.id,r=a.playerControls;a.renderInElement(n,r)},a.displayTime=function(){var e=n.timeIndicator.id,t={currentTimeIndicator:new Indicator("current-time-indicator","0:00"),durationIndicator:new Indicator("duration-indicator","")},r=t;a.renderInElement(e,r)},a.makeItWork=function(){var e=a.playerControls.playButton,t=a.playerControls.stopButton,n=a.playerControls.playBackSlider,r=a.playerControls.timeIndicator,i=a.playerControls.muteButton,o=a.playerControls.volumeSlider,d=a.playerControls.captionsButton,l=a.playerControls.fullscreenButton,u=function(){if(videoPlayer.readyState>0){var e=videoPlayer.duration,t=videoPlayer.currentTime,n=parseInt(e/60,10),a=Math.floor(e%60),r=parseInt(t/60,10),i=Math.floor(t%60),o=Math.floor(t/e*100),d=videoPlayer.buffered.end(videoPlayer.buffered.length-1),l=Math.floor(d/e*100),u=document.getElementById("duration-indicator"),c=document.getElementById("current-time-indicator"),s=document.getElementById("progress-container"),m=document.getElementById("progress-bar"),v=document.getElementById("buffer-bar");10>i?c.innerText=r+":0"+i+" / ":c.innerText=r+":"+i+" / ",10>a?u.innerText=n+":0"+a:u.innerText=n+":"+a,m.style.width=o+"%",v.style.width=l-o+"%",s.addEventListener("click",function(e){var t=e.pageX,n=contentContainer.offsetLeft,a=this.offsetLeft,r=s.offsetWidth,i=videoPlayer.duration,o;o=b()?t/r:0===n?(t-a)/r:(t-n-a)/r;var d=o*i;videoPlayer.currentTime=d})}};if(setInterval(u,200),e){var c=document.getElementById(e.id);c.addEventListener("click",function(e){videoPlayer.paused||videoPlayer.ended?(videoPlayer.play(),c.setAttribute("data-state","playing")):(videoPlayer.pause(),c.setAttribute("data-state","paused"))})}if(t){var s=document.getElementById(t.id);s.addEventListener("click",function(e){c.setAttribute("data-state","paused"),videoPlayer.pause(),videoPlayer.currentTime=0})}if(n){var m=document.getElementById(n.id);m.addEventListener("change",function(){videoPlayer.playbackRate=m.value})}if(o){var v=document.getElementById(o.id);v.addEventListener("change",function(){videoPlayer.volume=v.value,v.value>0?f.setAttribute("data-state","sound"):f.setAttribute("data-state","muted")})}if(i){var f=document.getElementById(i.id);f.addEventListener("click",function(e){videoPlayer.muted?(videoPlayer.muted=!1,f.setAttribute("data-state","sound"),v.removeAttribute("disabled")):(videoPlayer.muted=!0,f.setAttribute("data-state","muted"),v.setAttribute("disabled","disabled"))})}if(d){var p=document.getElementById(d.id);p.addEventListener("click",function(e){"visible"===captionsMenu.getAttribute("data-state")?(captionsMenu.setAttribute("data-state","hidden"),alert("hide")):(captionsMenu.setAttribute("data-state","visible"),alert("show"))})}if(l){var y=document.getElementById(l.id),b=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},g=function(e){videoContainer.setAttribute("data-fullscreen",!!e)},h=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen);h||(y.style.display="none"),y.addEventListener("click",function(e){b()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),g(!1)):(videoContainer.requestFullscreen?videoContainer.requestFullscreen():videoContainer.mozRequestFullScreen?videoContainer.mozRequestFullScreen():videoContainer.webkitRequestFullScreen?videoContainer.webkitRequestFullScreen():videoContainer.msRequestFullscreen&&videoContainer.msRequestFullscreen(),g(!0))}),document.addEventListener("fullscreenchange",function(e){g(!(!document.fullScreen&&!document.fullscreenElement))}),document.addEventListener("webkitfullscreenchange",function(){g(!!document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",function(){g(!!document.mozFullScreen)}),document.addEventListener("msfullscreenchange",function(){g(!!document.msFullscreenElement)})}},a.setCaptions=function(){console.log("setCaptions!");for(var e=videoPlayer.textTracks,t=e,n=[],a=document.createDocumentFragment(),r=a.appendChild(document.createElement("ul")),i=0;i<e.length;i++)e[i].mode="hidden";var n=[],a=document.createDocumentFragment(),r=a.appendChild(document.createElement("ul"));r.setAttribute("data-state","hidden");var o=function(t,a,i){var o=document.createElement("li"),d=o.appendChild(document.createElement("button"));return d.setAttribute("id",t),d.className="captions-button",a.length>0&&d.setAttribute("lang",a),d.value=i,d.setAttribute("data-state","inactive"),d.appendChild(document.createTextNode(i)),d.addEventListener("click",function(t){n.map(function(e,t,a){n[t].setAttribute("data-state","inactive")});for(var a=this.getAttribute("lang"),i=0;i<e.length;i++)e[i].language===a?(e[i].mode="showing",this.setAttribute("data-state","active")):e[i].mode="hidden";r.setAttribute("data-state","hidden")}),n.push(d),o};if(t){r.className="captions-menu",r.appendChild(o("captions-off","","Off"));for(var i=0;i<e.length;i++)r.appendChild(o("captions-"+e[i].language,e[i].language,e[i].label));videoContainer.appendChild(r),(window.onresize=function(){centerCaptionsButton=captionsButton.offsetLeft+captionsButton.offsetWidth/2,positonCaptionsMenu=centerCaptionsButton-r.offsetWidth/2,r.style.left=positonCaptionsMenu+"px"})()}for(var d="",l=document.querySelectorAll("track"),i=0;i<l.length;i++)l[i].hasAttribute("default")&&l[i].addEventListener("load",function(){function e(){for(var e=t.getElementsByTagName("a"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})}var t=contentContainer.appendChild(document.createElement("section"));t.setAttribute("id","video-captions");var n=this.track;d+="<p>";for(var a=0;a<n.cues.length;++a){var r=n.cues[a];d+='<a href="#" id="'+r.id+'" class="caption-cue" data-state="inactive" data-start="'+r.startTime+'">'+r.text+" </a>"}d+="</p>",t.innerHTML=d,n.oncuechange=function(){for(var e=this.activeCues[0],n=t.getElementsByTagName("a"),a=0;a<n.length;a++)n[a].id==e.id?n[a].setAttribute("data-state","active"):n[a].setAttribute("data-state","inactive")},e()},!0)}}VideoPlayer.prototype.renderInElement=function(e,t){var n=t,a=document.getElementById(e),r=Object.keys(n).length;for(var i in n)a.innerHTML+=n[i].toHTML()};