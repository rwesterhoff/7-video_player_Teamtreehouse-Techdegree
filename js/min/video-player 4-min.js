function VideoPlayer(e,t,n){var a=this;a.id=e,a.controlsContainer=t,a.playerControls=n,progressContainerId="progress-container",progressId="progress-bar",bufferId="buffer-bar",currentTimeIndicatorId="current-time-indicator",durationIndicatorId="duration-indicator",a.currentTime=0,a.displayAll=function(){a.displayProgress(),a.displayControls(),a.displayTime(),a.makeItWork(),a.setCaptions()},a.displayProgress=function(){var e=new Container(progressContainerId,"progress","visible"),t=document.getElementById(a.controlsContainer);e.createContainer(t);var n=e.id,r={progressBar:new Progress(progressId),bufferBar:new Progress(bufferId)},i=r;a.renderInElement(n,i)},a.displayControls=function(){var e=new Container("button-container","buttons","visible"),t=document.getElementById(a.controlsContainer);e.createContainer(t);var n=e.id,r=a.playerControls;a.renderInElement(n,r)},a.displayTime=function(){var e=n.timeIndicator.id,t={currentTimeIndicator:new Indicator(currentTimeIndicatorId,"0:00"),durationIndicator:new Indicator(durationIndicatorId,"")},r=t;a.renderInElement(e,r)},a.makeItWork=function(){var e=a.playerControls.playButton,t=a.playerControls.stopButton,n=document.querySelectorAll("input[type=range]"),r=a.playerControls.playBackSlider,i=a.playerControls.timeIndicator,o=a.playerControls.muteButton,d=a.playerControls.volumeSlider,l=a.playerControls.fullscreenButton,s=setInterval(function(){if(videoPlayer.readyState>0){var e=videoPlayer.duration,t=videoPlayer.currentTime,n=parseInt(e/60,10),a=Math.floor(e%60),r=parseInt(t/60,10),i=Math.floor(t%60),o=Math.floor(t/e*100),d=videoPlayer.buffered.end(videoPlayer.buffered.length-1),l=Math.floor(d/e*100),s=document.getElementById(durationIndicatorId),c=document.getElementById(currentTimeIndicatorId),u=document.getElementById(progressContainerId),m=document.getElementById(progressId),v=document.getElementById(bufferId);10>i?c.innerText=r+":0"+i+" / ":c.innerText=r+":"+i+" / ",10>a?s.innerText=n+":0"+a:s.innerText=n+":"+a,m.style.width=o+"%",v.style.width=l-o+"%",u.addEventListener("click",function(e){var t=e.pageX,n=contentContainer.offsetLeft,a=this.offsetLeft,r=u.offsetWidth,i=videoPlayer.duration,o;o=I()?t/r:0===n?(t-a)/r:(t-n-a)/r;var d=o*i;videoPlayer.currentTime=d,videoPlayer.play()})}},200);if(e){var c=document.getElementById(e.id);videoPlayer.addEventListener("playing",function(e){c.setAttribute("data-state","playing")}),c.addEventListener("click",function(e){videoPlayer.paused||videoPlayer.ended?(videoPlayer.play(),c.setAttribute("data-state","playing")):(videoPlayer.pause(),c.setAttribute("data-state","paused"))})}if(t){var u=document.getElementById(t.id);u.addEventListener("click",function(e){c.setAttribute("data-state","paused"),videoPlayer.pause(),videoPlayer.currentTime=0})}if(n){var m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(m)for(var v=n,f=0;f<v.length;++f)v[f].style.background="transparent";if(r){var y=document.getElementById(r.id),p=document.getElementById("playback-indicator"),g=videoPlayer.playbackRate;videoPlayer.addEventListener("loadeddata",function(e){p.innerText=g+"x"}),y.addEventListener("change",function(){videoPlayer.playbackRate=y.value,p.innerText=videoPlayer.playbackRate+"x"})}if(d){var b=document.getElementById(d.id);b.addEventListener("change",function(){videoPlayer.volume=b.value,b.value>0?E.setAttribute("data-state","sound"):E.setAttribute("data-state","muted")})}}if(o){var E=document.getElementById(o.id);E.addEventListener("click",function(e){videoPlayer.muted?(videoPlayer.muted=!1,E.setAttribute("data-state","sound"),b.removeAttribute("disabled")):(videoPlayer.muted=!0,E.setAttribute("data-state","muted"),b.setAttribute("disabled","disabled"))})}if(l){var C=document.getElementById(l.id),I=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},h=function(e){videoContainer.setAttribute("data-fullscreen",!!e)},P=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen);P?C.addEventListener("click",function(e){I()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),h(!1)):(videoContainer.requestFullscreen?videoContainer.requestFullscreen():videoContainer.mozRequestFullScreen?videoContainer.mozRequestFullScreen():videoContainer.webkitRequestFullScreen?videoContainer.webkitRequestFullScreen():videoContainer.msRequestFullscreen&&videoContainer.msRequestFullscreen(),h(!0))}):C.parentNode.removeChild(C)}},a.setCaptions=function(){var e=videoPlayer.textTracks.length>0,t=a.playerControls.captionsButton,n=document.getElementById(t.id);if(e){var r=contentContainer.appendChild(document.createElement("section")),i=document.createDocumentFragment(),o=i.appendChild(document.createElement("ul")),d=[],l=function(){function e(){for(var e=o.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})}for(var t="",n=document.querySelectorAll("track"),a=videoPlayer.textTracks,r=0;r<a.length;r++)if(n[r].hasAttribute("default")){console.log(n[r].label+" is default");var i=n[r].track,o=contentContainer.appendChild(document.createElement("section"));o.setAttribute("id","video-captions"),t+="<p>";for(var d=0;d<i.cues.length;++d){var l=i.cues[d];t+='<a href="#" id="'+l.id+'"',t+='class="caption-cue"',t+='data-state="inactive"',t+='data-start="'+l.startTime+'">',t+=l.text+" ",t+="</a>"}t+="</p>",o.innerHTML=t,i.oncuechange=function(){for(var e=this.activeCues[0],t=o.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].id==e.id?t[n].setAttribute("data-state","active"):t[n].setAttribute("data-state","inactive")},e()}else console.log(n[r].label+" is NOT default")},s=function(){for(var e=r.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})};if(l(),t){var c=function(){var e=function(e,t,n){var a=document.createElement("li"),r=a.appendChild(document.createElement("button"));return r.setAttribute("id",e),r.className="captions-button",t.length>0&&r.setAttribute("lang",t),r.value=n,r.setAttribute("data-state","inactive"),r.appendChild(document.createTextNode(n)),r.addEventListener("click",function(e){d.map(function(e,t,n){d[t].setAttribute("data-state","inactive")});for(var t=this.getAttribute("lang"),n=0;n<videoPlayer.textTracks.length;n++)videoPlayer.textTracks[n].language===t?(videoPlayer.textTracks[n].mode="showing",this.setAttribute("data-state","active")):videoPlayer.textTracks[n].mode="hidden";o.setAttribute("data-state","hidden")}),d.push(r),a};o.appendChild(e("captions-off","","Off")),o.className="captions-menu",o.setAttribute("data-state","hidden");for(var t=0;t<videoPlayer.textTracks.length;t++)o.appendChild(e("captions-"+videoPlayer.textTracks[t].language,videoPlayer.textTracks[t].language,videoPlayer.textTracks[t].label));videoContainer.appendChild(o),window.onresize=a.centerElement(n,o)};c(),n.addEventListener("click",function(e){"visible"===o.getAttribute("data-state")?o.setAttribute("data-state","hidden"):o.setAttribute("data-state","visible")})}}else n.parentNode.removeChild(n)}}VideoPlayer.prototype.renderInElement=function(e,t){var n=t,a=document.getElementById(e),r=Object.keys(n).length;for(var i in n)a.innerHTML+=n[i].toHTML()},VideoPlayer.prototype.centerElement=function(e,t){centerRelative=e.offsetLeft+e.offsetWidth/2,positionElement=centerRelative-t.offsetWidth/2,t.style.left=positionElement+"px"};