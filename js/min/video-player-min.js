var supportsVideo=!!document.createElement("video").canPlayType,videoContainer=document.querySelector("#video-container"),videoPlayer=document.querySelector("#video-player"),contentContainer=document.querySelector("#content");if(supportsVideo){var divHTML=document.createElement("div");divHTML.setAttribute("id","video-controls"),divHTML.setAttribute("class","controls"),divHTML.setAttribute("data-state","hidden");var playButtonHTML='<button id="playpause" class="srt" type="button" data-state="play">Play/Pause</button>\n',playBackSliderHTML='<input type="range" id="speed-bar" min="0.5" max="2" step="0.25" value="1">\n',playBackIndicatorHTML='<span id="playback-indicator">'+videoPlayer.playbackRate+"x</span>",stopButtonHTML='<button id="stop" class="srt" type="button" data-state="stop">Stop</button>\n',currentTimeIndicatorHTML='<span id="current-time-indicator"></span>\n',durationIndicatorHTML='<span id="duration-indicator"></span>\n',timeHTML='<div id="time-indicator">'+currentTimeIndicatorHTML+" / "+durationIndicatorHTML+"</div>",progressBarHTML='<div id="progress-container" class="progress">\n<span id="progress-bar"></span>\n</span>\n<span id="buffer-bar"></span>\n</span>\n</div>\n',muteButtonHTML='<button id="mute" class="srt" type="button" data-state="mute">Mute/Unmute</button>\n',volumeSliderHTML='<input type="range" id="volume-bar" min="0" max="1" step="0.1" value="1">\n',fullscreenButtonHTML='<button id="full-screen" class="srt" type="button" data-state="go-fullscreen">Fullscreen</button>\n',captionsButtonHTML='<button id="captions" type="button" data-state="captions">CC</button>\n',controlsHTML="";controlsHTML+=progressBarHTML,controlsHTML+='<div id="button-container">',controlsHTML+=playButtonHTML,controlsHTML+=timeHTML,controlsHTML+=stopButtonHTML,controlsHTML+=playBackSliderHTML,controlsHTML+=playBackIndicatorHTML,controlsHTML+=captionsButtonHTML,controlsHTML+=volumeSliderHTML,controlsHTML+=muteButtonHTML,controlsHTML+=fullscreenButtonHTML,controlsHTML+="</div>",divHTML.innerHTML=controlsHTML,videoContainer.appendChild(divHTML),videoPlayer.controls=!1;var videoControls=document.querySelector("#video-controls");videoControls.style.display="block";var playButton=document.querySelector("#playpause"),playBackSlider=document.querySelector("#speed-bar"),stopButton=document.querySelector("#stop"),muteButton=document.querySelector("#mute"),volumeSlider=document.querySelector("#volume-bar"),progressContainer=document.querySelector("#progress-container"),progressBar=document.querySelector("#progress-bar"),bufferBar=document.querySelector("#buffer-bar"),fullscreenButton=document.querySelector("#full-screen"),captionsButton=document.querySelector("#captions"),playBackIndicator=document.querySelector("#playback-indicator"),currentTimeIndicator=document.querySelector("#current-time-indicator"),durationIndicator=document.querySelector("#duration-indicator");videoPlayer.addEventListener("playing",function(e){playButton.setAttribute("data-state","playing")}),videoPlayer.addEventListener("ended",function(e){playButton.setAttribute("data-state","paused")}),playButton.addEventListener("click",function(e){videoPlayer.paused||videoPlayer.ended?(videoPlayer.play(),this.setAttribute("data-state","playing")):(videoPlayer.pause(),this.setAttribute("data-state","paused"))}),playBackSlider.addEventListener("change",function(){videoPlayer.playbackRate=playBackSlider.value,playBackIndicator.innerText=videoPlayer.playbackRate+"x"}),stopButton.addEventListener("click",function(e){playButton.setAttribute("data-state","paused"),videoPlayer.pause(),videoPlayer.currentTime=0}),muteButton.addEventListener("click",function(e){videoPlayer.muted?(videoPlayer.muted=!1,this.setAttribute("data-state","sound"),volumeSlider.removeAttribute("disabled")):(videoPlayer.muted=!0,this.setAttribute("data-state","muted"),volumeSlider.setAttribute("disabled","disabled"))}),volumeSlider.addEventListener("change",function(){videoPlayer.volume=volumeSlider.value,volumeSlider.value>0?muteButton.setAttribute("data-state","sound"):muteButton.setAttribute("data-state","muted")}),setInterval(function(){if(videoPlayer.readyState>0){var e=parseInt(videoPlayer.duration/60,10),t=Math.floor(videoPlayer.duration%60);10>t?durationIndicator.innerText=e+":0"+t:durationIndicator.innerText=e+":"+t;var n=parseInt(videoPlayer.currentTime/60,10),a=Math.floor(videoPlayer.currentTime%60);10>a?currentTimeIndicator.innerText=n+":0"+a:currentTimeIndicator.innerText=n+":"+a;var r=Math.floor(videoPlayer.currentTime/videoPlayer.duration*100);progressBar.style.width=r+"%";var o=videoPlayer.buffered.end(videoPlayer.buffered.length-1),i=Math.floor(o/videoPlayer.duration*100);bufferBar.style.width=i-r+"%"}},200);var isFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)};progressContainer.addEventListener("click",function(e){var t=e.pageX,n=contentContainer.offsetLeft,a=this.offsetLeft,r=progressContainer.offsetWidth,o=videoPlayer.duration,i;i=isFullScreen()?t/r:0===n?(t-a)/r:(t-n-a)/r;var u=i*o;videoPlayer.currentTime=u});var fullScreenEnabled=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen);fullScreenEnabled||(fullscreenButton.style.display="none");var setFullscreenData=function(e){videoContainer.setAttribute("data-fullscreen",!!e)};fullscreenButton.addEventListener("click",function(e){isFullScreen()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),setFullscreenData(!1)):(videoContainer.requestFullscreen?videoContainer.requestFullscreen():videoContainer.mozRequestFullScreen?videoContainer.mozRequestFullScreen():videoContainer.webkitRequestFullScreen?videoContainer.webkitRequestFullScreen():videoContainer.msRequestFullscreen&&videoContainer.msRequestFullscreen(),setFullscreenData(!0))}),document.addEventListener("fullscreenchange",function(e){setFullscreenData(!(!document.fullScreen&&!document.fullscreenElement))}),document.addEventListener("webkitfullscreenchange",function(){setFullscreenData(!!document.webkitIsFullScreen)}),document.addEventListener("mozfullscreenchange",function(){setFullscreenData(!!document.mozFullScreen)}),document.addEventListener("msfullscreenchange",function(){setFullscreenData(!!document.msFullscreenElement)});for(var i=0;i<videoPlayer.textTracks.length;i++)videoPlayer.textTracks[i].mode="hidden";var captionMenuButtons=[],df=document.createDocumentFragment(),captionsMenu=df.appendChild(document.createElement("ul"));captionsMenu.setAttribute("data-state","hidden");var createMenuItem=function(e,t,n){var a=document.createElement("li"),r=a.appendChild(document.createElement("button"));return r.setAttribute("id",e),r.className="captions-button",t.length>0&&r.setAttribute("lang",t),r.value=n,r.setAttribute("data-state","inactive"),r.appendChild(document.createTextNode(n)),r.addEventListener("click",function(e){captionMenuButtons.map(function(e,t,n){captionMenuButtons[t].setAttribute("data-state","inactive")});for(var t=this.getAttribute("lang"),n=0;n<videoPlayer.textTracks.length;n++)videoPlayer.textTracks[n].language===t?(videoPlayer.textTracks[n].mode="showing",this.setAttribute("data-state","active")):videoPlayer.textTracks[n].mode="hidden";captionsMenu.setAttribute("data-state","hidden")}),captionMenuButtons.push(r),a};if(videoPlayer.textTracks){captionsMenu.className="captions-menu",captionsMenu.appendChild(createMenuItem("captions-off","","Off"));for(var i=0;i<videoPlayer.textTracks.length;i++)captionsMenu.appendChild(createMenuItem("captions-"+videoPlayer.textTracks[i].language,videoPlayer.textTracks[i].language,videoPlayer.textTracks[i].label));videoContainer.appendChild(captionsMenu),(window.onresize=function(){centerCaptionsButton=captionsButton.offsetLeft+captionsButton.offsetWidth/2,positonCaptionsMenu=centerCaptionsButton-captionsMenu.offsetWidth/2,captionsMenu.style.left=positonCaptionsMenu+"px"})()}captionsButton.addEventListener("click",function(e){"visible"===captionsMenu.getAttribute("data-state")?captionsMenu.setAttribute("data-state","hidden"):captionsMenu.setAttribute("data-state","visible")});for(var captionsHTML="",trackElements=document.querySelectorAll("track"),i=0;i<trackElements.length;i++)trackElements[i].hasAttribute("default")&&trackElements[i].addEventListener("load",function(){function e(){for(var e=t.getElementsByTagName("a"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})}var t=contentContainer.appendChild(document.createElement("section"));t.setAttribute("id","video-captions");var n=this.track;captionsHTML+="<p>";for(var a=0;a<n.cues.length;++a){var r=n.cues[a];captionsHTML+='<a href="#" id="'+r.id+'" class="caption-cue" data-state="inactive" data-start="'+r.startTime+'">'+r.text+" </a>"}captionsHTML+="</p>",t.innerHTML=captionsHTML,n.oncuechange=function(){for(var e=this.activeCues[0],n=t.getElementsByTagName("a"),a=0;a<n.length;a++)n[a].id==e.id?n[a].setAttribute("data-state","active"):n[a].setAttribute("data-state","inactive")},e()},!0)}