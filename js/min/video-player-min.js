function VideoPlayer(e,t,n){var r=this;r.id=e,r.controlsContainer=t,r.playerControls=n,progressContainerId="progress-container",progressId="progress-bar",bufferId="buffer-bar",currentTimeIndicatorId="current-time-indicator",durationIndicatorId="duration-indicator",r.currentTime=0,r.displayAll=function(){r.displayProgress(),r.displayControls(),r.displayTime(),r.makeItWork(),r.setCaptions()},r.displayProgress=function(){var e=new Container(progressContainerId,"progress","visible"),t=document.getElementById(r.controlsContainer);e.createContainer(t);var n=e.id,a={progressBar:new Progress(progressId),bufferBar:new Progress(bufferId)},i=a;r.renderInElement(n,i)},r.displayControls=function(){var e=new Container("button-container","buttons","visible"),t=document.getElementById(r.controlsContainer);e.createContainer(t);var n=e.id,a=r.playerControls;r.renderInElement(n,a)},r.displayTime=function(){var e=n.timeIndicator.id,t={currentTimeIndicator:new Indicator(currentTimeIndicatorId,"0:00"),durationIndicator:new Indicator(durationIndicatorId,"")},a=t;r.renderInElement(e,a)},r.makeItWork=function(){var e=r.playerControls.playButton,t=r.playerControls.stopButton,n=document.querySelectorAll("input[type=range]"),a=r.playerControls.playBackSlider,i=r.playerControls.timeIndicator,o=r.playerControls.muteButton,d=r.playerControls.volumeSlider,l=r.playerControls.fullscreenButton,c=setInterval(function(){if(videoPlayer.readyState>0){var e=videoPlayer.duration,t=videoPlayer.currentTime,n=parseInt(e/60,10),r=Math.floor(e%60),a=parseInt(t/60,10),i=Math.floor(t%60),o=Math.floor(t/e*100),d=videoPlayer.buffered.end(videoPlayer.buffered.length-1),l=Math.floor(d/e*100),c=document.getElementById(durationIndicatorId),s=document.getElementById(currentTimeIndicatorId),u=document.getElementById(progressContainerId),m=document.getElementById(progressId),v=document.getElementById(bufferId);10>i?s.innerText=a+":0"+i+" / ":s.innerText=a+":"+i+" / ",10>r?c.innerText=n+":0"+r:c.innerText=n+":"+r,m.style.width=o+"%",v.style.width=l-o+"%",u.addEventListener("click",function(e){var t=e.pageX,n=contentContainer.offsetLeft,r=this.offsetLeft,a=u.offsetWidth,i=videoPlayer.duration,o;o=I()?t/a:0===n?(t-r)/a:(t-n-r)/a;var d=o*i;videoPlayer.currentTime=d,videoPlayer.play()})}},200);if(e){var s=document.getElementById(e.id);videoPlayer.addEventListener("playing",function(e){s.setAttribute("data-state","playing")}),s.addEventListener("click",function(e){videoPlayer.paused||videoPlayer.ended?(videoPlayer.play(),s.setAttribute("data-state","playing")):(videoPlayer.pause(),s.setAttribute("data-state","paused"))})}if(t){var u=document.getElementById(t.id);u.addEventListener("click",function(e){s.setAttribute("data-state","paused"),videoPlayer.pause(),videoPlayer.currentTime=0})}if(n){var m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(m)for(var v=n,f=0;f<v.length;++f)v[f].style.background="transparent";if(a){var y=document.getElementById(a.id),p=document.getElementById("playback-indicator"),g=videoPlayer.playbackRate;videoPlayer.addEventListener("loadeddata",function(e){p.innerText=g+"x"}),y.addEventListener("change",function(){videoPlayer.playbackRate=y.value,p.innerText=videoPlayer.playbackRate+"x"})}if(d){var b=document.getElementById(d.id);b.addEventListener("change",function(){videoPlayer.volume=b.value,b.value>0?E.setAttribute("data-state","sound"):E.setAttribute("data-state","muted")})}}if(o){var E=document.getElementById(o.id);E.addEventListener("click",function(e){videoPlayer.muted?(videoPlayer.muted=!1,E.setAttribute("data-state","sound"),b.removeAttribute("disabled")):(videoPlayer.muted=!0,E.setAttribute("data-state","muted"),b.setAttribute("disabled","disabled"))})}if(l){var C=document.getElementById(l.id),I=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},h=function(e){videoContainer.setAttribute("data-fullscreen",!!e)},P=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen);P?C.addEventListener("click",function(e){I()?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),h(!1)):(videoContainer.requestFullscreen?videoContainer.requestFullscreen():videoContainer.mozRequestFullScreen?videoContainer.mozRequestFullScreen():videoContainer.webkitRequestFullScreen?videoContainer.webkitRequestFullScreen():videoContainer.msRequestFullscreen&&videoContainer.msRequestFullscreen(),h(!0))}):C.parentNode.removeChild(C)}},r.setCaptions=function(){var e=videoPlayer.textTracks.length>0,t=r.playerControls.captionsButton,n=document.getElementById(t.id);if(e){var a=contentContainer.appendChild(document.createElement("section")),i=document.createDocumentFragment(),o=i.appendChild(document.createElement("ul")),d=[],l=function(){function e(){for(var e=o.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})}for(var t="",n=document.querySelectorAll("track"),r=videoPlayer.textTracks,a=0;a<r.length;a++)if(n[a].hasAttribute("default")){var i=n[a].track,o=contentContainer.appendChild(document.createElement("section"));if(o.setAttribute("id","video-captions"),n[a].readyState>0){t+="<p>";for(var d=0;d<i.cues.length;++d){var l=i.cues[d];t+='<a href="#" id="'+l.id+'"',t+='class="caption-cue"',t+='data-state="inactive"',t+='data-start="'+l.startTime+'">',t+=l.text+" ",t+="</a>"}t+="</p>",o.innerHTML=t,i.oncuechange=function(){for(var e=this.activeCues[0],t=o.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].id==e.id?t[n].setAttribute("data-state","active"):t[n].setAttribute("data-state","inactive")}}e()}},c=function(){for(var e=a.getElementsByTagName("a"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=this.getAttribute("data-start");videoPlayer.currentTime=t,videoPlayer.play()})};if(l(),t){var s=function(){var e=function(e,t,n){var r=document.createElement("li"),a=r.appendChild(document.createElement("button"));return a.setAttribute("id",e),a.className="captions-button",t.length>0&&a.setAttribute("lang",t),a.value=n,a.setAttribute("data-state","inactive"),a.appendChild(document.createTextNode(n)),a.addEventListener("click",function(e){d.map(function(e,t,n){d[t].setAttribute("data-state","inactive")});for(var t=this.getAttribute("lang"),n=0;n<videoPlayer.textTracks.length;n++)videoPlayer.textTracks[n].language===t?(videoPlayer.textTracks[n].mode="showing",this.setAttribute("data-state","active")):videoPlayer.textTracks[n].mode="hidden";o.setAttribute("data-state","hidden")}),d.push(a),r};o.appendChild(e("captions-off","","Off")),o.className="captions-menu",o.setAttribute("data-state","hidden");for(var t=0;t<videoPlayer.textTracks.length;t++)o.appendChild(e("captions-"+videoPlayer.textTracks[t].language,videoPlayer.textTracks[t].language,videoPlayer.textTracks[t].label));videoContainer.appendChild(o),window.onresize=r.centerElement(n,o)};s(),n.addEventListener("click",function(e){"visible"===o.getAttribute("data-state")?o.setAttribute("data-state","hidden"):o.setAttribute("data-state","visible")})}}else n.parentNode.removeChild(n)}}VideoPlayer.prototype.renderInElement=function(e,t){var n=t,r=document.getElementById(e),a=Object.keys(n).length;for(var i in n)r.innerHTML+=n[i].toHTML()},VideoPlayer.prototype.centerElement=function(e,t){centerRelative=e.offsetLeft+e.offsetWidth/2,positionElement=centerRelative-t.offsetWidth/2,t.style.left=positionElement+"px"};